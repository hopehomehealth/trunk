/*! Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
 * Dual licensed under the MIT (MIT_LICENSE.txt)
 * and GPL Version 2 (GPL_LICENSE.txt) licenses.
 *
 * Version: 1.1.1
 * Requires jQuery 1.3+
 * Docs: http://docs.jquery.com/Plugins/livequery
 */
define(function(require,exports,module){var e=require("jquery");(function(e){e.extend(e.fn,{livequery:function(i,t,u){var n=this,r;if(e.isFunction(i))u=t,t=i,i=undefined;e.each(e.livequery.queries,function(e,s){if(n.selector==s.selector&&n.context==s.context&&i==s.type&&(!t||t.$lqguid==s.fn.$lqguid)&&(!u||u.$lqguid==s.fn2.$lqguid))return(r=s)&&false});r=r||new e.livequery(this.selector,this.context,i,t,u);r.stopped=false;r.run();return this},expire:function(i,t,u){var n=this;if(e.isFunction(i))u=t,t=i,i=undefined;e.each(e.livequery.queries,function(r,s){if(n.selector==s.selector&&n.context==s.context&&(!i||i==s.type)&&(!t||t.$lqguid==s.fn.$lqguid)&&(!u||u.$lqguid==s.fn2.$lqguid)&&!this.stopped)e.livequery.stop(s.id)});return this}});e.livequery=function(i,t,u,n,r){this.selector=i;this.context=t;this.type=u;this.fn=n;this.fn2=r;this.elements=[];this.stopped=false;this.id=e.livequery.queries.push(this)-1;n.$lqguid=n.$lqguid||e.livequery.guid++;if(r)r.$lqguid=r.$lqguid||e.livequery.guid++;return this};e.livequery.prototype={stop:function(){var e=this;if(this.type)this.elements.unbind(this.type,this.fn);else if(this.fn2)this.elements.each(function(i,t){e.fn2.apply(t)});this.elements=[];this.stopped=true},run:function(){if(this.stopped)return;var i=this;var t=this.elements,u=e(this.selector,this.context),n=u.not(t);this.elements=u;if(this.type){n.bind(this.type,this.fn);if(t.length>0)e.each(t,function(t,n){if(e.inArray(n,u)<0)e.event.remove(n,i.type,i.fn)})}else{n.each(function(){i.fn.apply(this)});if(this.fn2&&t.length>0)e.each(t,function(t,n){if(e.inArray(n,u)<0)i.fn2.apply(n)})}}};e.extend(e.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(e.livequery.running&&e.livequery.queue.length){var i=e.livequery.queue.length;while(i--)e.livequery.queries[e.livequery.queue.shift()].run()}},pause:function(){e.livequery.running=false},play:function(){e.livequery.running=true;e.livequery.run()},registerPlugin:function(){e.each(arguments,function(i,t){if(!e.fn[t])return;var u=e.fn[t];e.fn[t]=function(){var i=u.apply(this,arguments);e.livequery.run();return i}})},run:function(i){if(i!=undefined){if(e.inArray(i,e.livequery.queue)<0)e.livequery.queue.push(i)}else e.each(e.livequery.queries,function(i){if(e.inArray(i,e.livequery.queue)<0)e.livequery.queue.push(i)});if(e.livequery.timeout)clearTimeout(e.livequery.timeout);e.livequery.timeout=setTimeout(e.livequery.checkQueue,20)},stop:function(i){if(i!=undefined)e.livequery.queries[i].stop();else e.each(e.livequery.queries,function(i){e.livequery.queries[i].stop()})}});e.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html");e(function(){e.livequery.play()})})(e)});